<section id="content" class="animate-fade-up" data-ng-controller="MyTasksCtrl">
	<div class="view-container">
		<div class="page page-tasks">
			<div class="row">
				<div class="col-sm-9">
					<div class="clearfix"></div>
					<section class="task-container">
						<form data-ng-submit="add()" class="add-task">
							<input type="text" placeholder="{{ 'Create new task' | translate }}" class="form-control" data-ng-model="newTask" autofocus>
							<a type="submit" class="submit-button" data-ng-click="add()">
								<span class="glyphicon glyphicon-plus"></span>
							</a>
						</form>
						<section>
							<ul class="filters list-inline nav nav-tabs">
								<li data-ng-class="{active: statusFilter == ''}">
									<a href="" data-toggle="tab" data-ng-click="filter('all')">
										{{ 'All' | translate }}
									</a>
								</li>
								<li data-ng-class="{active: statusFilter.isCompleted == false }">
									<a href="" data-toggle="tab" data-ng-click="filter('active')">
										{{ 'Open' | translate }}
									</a>
								</li>
								<li data-ng-class="{active: statusFilter.isCompleted == true }">
									<a href="" data-toggle="tab" data-ng-click="filter('isCompleted')">
										{{ 'Completed' | translate }}
									</a>
								</li>
								<li class="pull-right form-group">
									<div class="row">
										<div class="col-md-6">
											<input type="button" class="btn btn-primary btn-block" value="{{ 'Sort by group' | translate }}" data-ng-click="sort('group')">
										</div>
										<div class="col-md-6">
											<input type="button" class="btn btn-primary btn-block" value="{{ 'Sort by date' | translate }}" data-ng-click="sort('dueTime')">
										</div>
									</div>
								</li>
							</ul>
						</section>
						<section  data-ng-cloak>
							<ul class="task-list list-unstyled">
								<li data-ng-repeat="task in tasks | orderBy:sortType:reverse | filter:statusFilter track by $index" data-ng-class="{completed: task.isCompleted, editing: task == editedTask}">
									<div class="view">
										<div class="row">
											<div class="col-md-1">
												<input type="checkbox" class="toggle-task" data-ng-model="task.isCompleted" data-ng-change="completed(task)">
											</div>
											<div class="col-md-2">
												<label data-ng-click="edit(task)">
													{{ task.assignedByUser.firstname }}
												</label>
											</div>
											<div class="col-md-5">
												<label data-ng-click="edit(task)">
													{{ task.description }}
												</label>
											</div>
											<div class="col-md-3" data-ng-class="{'text-danger':task.overdue, 'text-success':(!task.overdue)}">
												<label data-ng-click="edit(task)">
													<small>({{ task.dueTimeString }})</small>
												</label>
											</div>
											<div class="col-md-1">
												<span class="glyphicon glyphicon-pencil" data-ng-click="edit(task)"></span>
												<span class="glyphicon glyphicon-remove" data-ng-click="remove(task, $index)"></span>
											</div>
										</div>
									</div>
									<div class="edit">
										<div class="row">
											<div class="col-md-3">
												<select class="form-control" data-ng-model="task.assignedByUserValue">
													<option data-ng-repeat="user in users">{{user.firstname}}</option>
												</select>
											</div>
											<div class="col-md-5">
												<input type="text" class="form-control" data-ng-trim="false" data-ng-model="task.description" data-task-focus="task == editedTask">
											</div>
											<div class="col-md-3">
												<input type="text" class="form-control" data-ng-trim="false" data-ng-model="task.dueDate">
											</div>
											<div class="col-md-1">
												<span class="glyphicon glyphicon-ok" data-ng-click="doneEditing(task, $index)"></span>
											</div>
										</div>
									</div>
								</li>
							</ul>
						</section>
						<footer class="task-footer">
							<ul class="list-inline clearfix">
								<li class="first-item">
									<input type="checkbox" id="toggle-all" data-ng-model="allChecked" data-ng-change="markAll(allChecked)">
									<label for="toggle-all">Mark all as done</label>
								</li>
								<li class="text-center">
									<span>
									<strong>{{openTasks}}</strong>
									<span class="text-muted" data-ng-pluralize count="openTasks" when="{one: 'item left', other: 'items left'}"></span>
									</span>
								</li>
								<li class="text-right">
									<span class="clear-completed" data-ng-show="openTasks < tasks.length">Completed ({{tasks.length - openTasks}})</span>
								</li>
							</ul>
						</footer>
						
					</section>
				</div>
				<div class="col-md-3">
					<div class="alert alert-info">
						<strong>{{ 'Task statistics' | translate }}</strong>
						<hr>
						<p><strong>Overdue tasks</strong>: {{ overdueTasks }}</p>
						<p><strong>Open tasks</strong>: {{ openTasks }}</p>
						<p><strong>Closed tasks</strong>: {{ closedTasks }}</p>
					</div>
					<div class="alert alert-info">
						<strong>{{ 'More stats' | translate }}</strong>
						<hr>
						<p>Later</p>
						<hr>
						<p><a class="btn btn-info btn-block">{{ 'View more...' | translate}}</a></p>
					</div>
				</div>
			</div>
		</div>
	</div>
</section>